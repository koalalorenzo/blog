{{ $instjs := resources.Get "js/instantpage.min.js" | js.Build }}
{{ $jsslice := slice $instjs }}

{{ if (.Params.mermaid) }}
{{ $mermaidjs := resources.Get "js/mermaid.min.js" | js.Build }}
{{ $jsslice = $jsslice | append (slice $mermaidjs) }}
{{ end }}

{{ if (.IsPage) }}
{{ $tocbot := resources.Get "js/tocbot.min.js" | js.Build }}
{{ $jsslice = $jsslice | append (slice $tocbot) }}
{{ end }}

{{ $js := $jsslice | resources.Concat "js/bundle.js" | js.Build | minify | fingerprint }}
<script src="{{ $js.RelPermalink | absURL }}"></script>

{{ if (.IsPage) }}
<script type="text/javascript">
  tocbot.init({
      // Where to render the table of contents.
      tocSelector: '#TableOfContents',
      // Where to grab the headings to build the table of contents.
      contentSelector: 'article.full',
      // Which headings to grab inside of the contentSelector element.
      headingSelector: 'h2, h3',
      orderedList: false,
  });
</script>
{{ end }}
  
<!-- Cloudflare Web Analytics -->
<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "ff0fefbb0f5146fd8e2576bf281447b7"}'></script>
<!-- End Cloudflare Web Analytics -->
